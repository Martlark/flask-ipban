{#
# Copyright 2019 Andrew Rowe.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#}
<!doctype html>
<html lang="en">
<head>
    <title>{{ title }}</title>
    <script src="{{ url_for('static', filename='index.js') }}" defer="defer"></script>
</head>
<body>

<h1>{{ title }}</h1>
<h3 style="background: antiquewhite" id="message"></h3>
<table>
    <thead>
    <tr>
        <th>Action</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            <button onclick="controller.getIndex()">Test get</button>
        </td>
        <td>
            Get the hello page to test if banned.  Ban expires in {{ban_seconds}} seconds.
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="controller.banMe({{ ban_count }})">Repeat until banned</button>
        </td>
        <td>
            Repeat fetch of an unknown page until this ip is banned
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="controller.addToBan('127.0.0.1')">Add 127.0.0.1 to block list</button>
        </td>
        <td>
            Add this ip to the banned list
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="controller.addIt()">Increment observations of this ip</button>

        </td>
        <td>
            Manually increment the ban count for this ip in the ban list
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="controller.ignoreTest({{ ban_count }})">Get /tmp/(random number) that should be ignored</button>

        </td>
        <td>
            The url this action fetches is in the ignore list and won't raise a 403 no matter how many times called
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="controller.whiteListAdd('127.0.0.1')">Add to whitelist</button>
        </td>
        <td>
            Adds this ip to the whitelist and won't raise a 403 anymore
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="controller.whiteListRemove('127.0.0.1')">Remove from whitelist</button>
        </td>
        <td>
            Removes this ip from the whitelist. Any existing ban will operate again.
        </td>
    </tr>
    <tr>
        <td>
            <button onclick="controller.getIndex('/manager/html')">Open nuisance url</button>
        </td>
        <td>
            Will ban this ip immediately.
        </td>
    </tr>
    </tbody>
</table>


</body>
</html>
